!function(){"use strict";angular.module("configurations",[])}(),function(){"use strict";function n(n,t,s){var a=[],c=s;this.registerOption=function(n,i,o){n.keyID=o,n.willSave=i,a.push(n)},this.saveConfigurations=function(){(i||e)&&console.debug(a);var t;try{t=require("fs")}catch(n){return void((r||e)&&console.error("Require is not defined. Run in a NWJS window/app to save configurations"))}c.configs={};for(var u=0;u<a.length;u++){var f=a[u];c.configs[f.type]||(c.configs[f.type]=[]);var l={keyID:f.keyID};if(f.willSave instanceof Array)for(var g=0;g<f.willSave.length;g++)l[f.willSave[g]]=f[f.willSave[g]];else"auto"==f.willSave||(l[f.willSave]=f[f.willSave]);c.configs[f.type].push(l)}n.$apply();var v="app/configurations/configurations.data.json";t.writeFile(v,angular.toJson(s.configs," "),function(n){n?(r||e)&&console.error("Error saving file:"+n):(o||e)&&console.info("File saved to "+v)})},this.getData=function(n){t.get("app/configurations/configurations.data.json").then(n)}}var i=!1,o=!1,e=!1,r=!0;angular.module("configurations").controller("configurationsController",["$scope","$http","sharedConfigurations",n])}(),function(){"use strict";angular.module("configurations").directive("configurations",function(){return{restrict:"E",controller:"configurationsController"}})}(),function(){"use strict";angular.module("configurations").factory("sharedConfigurations",function(){return{configs:{}}})}(),function(){"use strict";var n=!1,i=!0,o=!1,e=function(e,r,t,s){var a=e.$id;(n||o)&&console.debug("Object received in scope:",e.grPersist),e.grPersist||(e.grPersist="auto"),s.registerOption(r.context,e.grPersist,a),s.getData(function(e){var t=e.data;if($.isEmptyObject(t))return void((i||o)&&console.info("Seems like the file needed to configure views is empty"));var s=r.context,c=s.type,u=t[c];if(u){var f,l;for((n||o)&&console.debug("Searching for id",a,"in",u),l=0;l<u.length;l++)if(u[l].keyID===a){f=u[l],(n||o)&&console.log("found!");break}if(f){var g=Object.keys(f);for(l=0;l<g.length;l++){var v=g[l];s[v]=f[v]}}}})};angular.module("configurations").directive("grPersist",function(){return{require:"^configurations",scope:{grPersist:"="},link:e}})}(),function(){"use strict";var n=function(n,i,o,e){i.bind("click",function(){e.saveConfigurations()})};angular.module("configurations").directive("grSave",function(){return{restrict:"A",require:"^configurations",scope:{},link:n}})}();